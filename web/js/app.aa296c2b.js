(function(t){function e(e){for(var n,s,i=e[0],c=e[1],u=e[2],p=0,d=[];p<i.length;p++)s=i[p],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&d.push(r[s][0]),r[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(d.length)d.shift()();return a.push.apply(a,u||[]),o()}function o(){for(var t,e=0;e<a.length;e++){for(var o=a[e],n=!0,i=1;i<o.length;i++){var c=o[i];0!==r[c]&&(n=!1)}n&&(a.splice(e--,1),t=s(s.s=o[0]))}return t}var n={},r={app:0},a=[];function s(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=n,s.d=function(t,e,o){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(o,n,function(e){return t[e]}.bind(null,n));return o},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;a.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";var n=o("85ec"),r=o.n(n);r.a},"0986":function(t,e,o){},"0bce":function(t,e,o){"use strict";var n=o("0986"),r=o.n(n);r.a},"11ba":function(t,e,o){"use strict";var n=o("e136"),r=o.n(n);r.a},"12b6":function(t,e,o){"use strict";var n=o("944f"),r=o.n(n);r.a},"19c5":function(t,e,o){"use strict";var n=o("5569"),r=o.n(n);r.a},"295b":function(t,e,o){},4982:function(t,e,o){},"49a7":function(t,e,o){},"4aa8":function(t,e,o){"use strict";var n=o("49a7"),r=o.n(n);r.a},5569:function(t,e,o){},"56d7":function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("2b0e"),r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("router-view")],1)},a=[],s={name:"App"},i=s,c=(o("034f"),o("2877")),u=Object(c["a"])(i,r,a,!1,null,null,null),l=u.exports,p=o("8c4f"),d=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("Header",{attrs:{user:t.user},on:{logout:t.logout,"check-cur-user":t.checkCurUser}}),o("Option",{on:{search:t.search,"sort-type-change":t.sortTypeChange}}),o("Info",{attrs:{loading:t.loading,user:t.user,books:t.books,"list-type":t.listType,"cur-page":t.curPage,"total-page":t.totalPage},on:{"page-change":t.pageChange,"list-type-change":t.listTypeChange,"borrow-book":t.borrowBook,"return-book":t.returnBook}})],1)},f=[],h=(o("d3b7"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"header"},[o("div",{staticClass:"header-logo"},[t._v("VL")]),null===t.user.name?o("div",{staticClass:"div-header-btn"},[o("button",{staticClass:"btn btn-header btn-header-login",attrs:{type:"button"},on:{click:function(e){return t.$router.push({path:"/login"})}}},[t._v("登录")])]):o("div",{staticClass:"div-header-btn"},[o("button",{staticClass:"btn btn-header btn-header-reg",attrs:{type:"button"}},[t._v("用户: "+t._s(t.user.name))]),o("button",{staticClass:"btn btn-header btn-header-login",attrs:{type:"button"},on:{click:function(e){return t.$emit("logout")}}},[t._v("退出")])])])}),v=[],b={name:"Header",props:["user"],created:function(){this.$emit("check-cur-user")}},m=b,g=(o("19c5"),Object(c["a"])(m,h,v,!1,null,"6cfa8c5e",null)),k=g.exports,_=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"opt-container"},[t._m(0),o("input",{attrs:{id:"search","aria-label":"search",placeholder:"搜索..."},on:{input:function(e){return t.$emit("search",e.target.value)}}}),o("div",{attrs:{id:"sort-by"}},[o("div",{staticClass:"btn-group",attrs:{"data-toggle":"buttons"}},[o("label",{staticClass:"btn btn-primary active",attrs:{id:"sort-by-hot"}},[o("input",{attrs:{type:"radio",name:"options",checked:""},on:{click:function(e){return t.$emit("sort-type-change",1)}}}),t._v(" 按热度排序 ")]),o("label",{staticClass:"btn btn-primary",attrs:{id:"sort-by-time"}},[o("input",{attrs:{type:"radio",name:"options"},on:{click:function(e){return t.$emit("sort-type-change",2)}}}),t._v(" 按时间排序 ")])])])])},y=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("h1",[t._v("欢迎来到"),o("br"),t._v("Void Library")])}],C={name:"Option"},w=C,x=(o("cfc9"),Object(c["a"])(w,_,y,!1,null,"85579be4",null)),$=x.exports,P=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"info-container"},[o("ul",{staticClass:"nav nav-tabs"},[o("li",{staticClass:"nav-item"},[o("a",{staticClass:"nav-link",class:{active:1===t.listType},on:{click:function(e){return t.$emit("list-type-change",1)}}},[t._v("全馆浏览")])]),o("li",{staticClass:"nav-item"},[o("a",{staticClass:"nav-link",class:{active:2===t.listType},on:{click:function(e){return t.$emit("list-type-change",2)}}},[t._v("我的借阅")])])]),null===t.user.name&&2===t.listType?o("div",{staticClass:"empty-text"},[o("a",{attrs:{href:""},on:{click:function(e){return t.$router.push({path:"/login"})}}},[t._v("登录")]),t._v(" 后即可查看“我的借阅”信息 ")]):null===t.books||0===t.books.length?o("div",{staticClass:"empty-text"},[t._v(" 暂无相关书目信息 ")]):o("BookBoard",{attrs:{books:t.books,"cur-page":t.curPage,"total-page":t.totalPage},on:{"page-change":t.pageChange,"borrow-book":t.borrowBook,"return-book":t.returnBook}})],1)},T=[],O=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},B=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"loading"},[o("span"),o("span"),o("span"),o("span"),o("span")]),o("div",{staticClass:"loading-text"},[t._v(" Loading... ")])])}],j={name:"Loading"},L=j,M=(o("11ba"),Object(c["a"])(L,O,B,!1,null,"aea24f56",null)),E=M.exports,S=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"book-board"},[o("div",{staticClass:"row"},t._l(t.books,(function(e){return o("BookCard",{key:e.id,attrs:{book:e},on:{"borrow-book":t.borrowBook,"return-book":t.returnBook}})})),1),o("div",{staticClass:"pages"},[o("ul",{staticClass:"pagination justify-content-center"},t._l(t.totalPage,(function(e){return o("li",{key:e,staticClass:"page-item",class:{active:e===t.curPage},on:{click:function(o){return t.$emit("page-change",e)}}},[o("a",{staticClass:"page-link"},[t._v(t._s(e))])])})),0)])])},N=[],V=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"col-se"},[o("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.option(t.book.option,t.book.id)}}},[o("div",{staticClass:"book-card"},[o("div",{staticClass:"book-card-name"},[t._v(t._s(t.book.name))]),o("div",{staticClass:"book-card-intro"},[t._v(t._s(t.book.intro)+" ")]),o("table",[o("tr",[o("td",[t._v("作者：")]),o("td",[t._v(t._s(t.book.author))])]),o("tr",[o("td",[t._v("热度：")]),o("td",[t._v(t._s(t.book.hot))])]),o("tr",[o("td",[t._v("上架时间：")]),o("td",[t._v(t._s(t.book.time))])])]),1===t.book.option?o("div",{staticClass:"book-card-option"},[t._v(" (点击卡片 "),o("b",{staticClass:"option-borrow"},[t._v("借阅")]),t._v(" 本书) ")]):2===t.book.option?o("div",{staticClass:"book-card-option"},[t._v(" (点击卡片 "),o("b",{staticClass:"option-return"},[t._v("归还")]),t._v(" 本书) ")]):3===t.book.option?o("div",{staticClass:"book-card-option"},[t._v(" (此书 "),o("b",{staticClass:"option-no"},[t._v("暂无库存")]),t._v(" 不可借阅) ")]):o("div",{staticClass:"book-card-option"},[t._v(" (请先 "),o("b",{staticClass:"option-login"},[t._v("登录")]),t._v(" 以进行更多操作) ")])])])])},I=[],H={name:"BookCard",props:["book"],methods:{option:function(t,e){1===t?this.$emit("borrow-book",e):2===t&&this.$emit("return-book",e)}}},J=H,U=(o("12b6"),Object(c["a"])(J,V,I,!1,null,"0202d094",null)),A=U.exports,R={name:"BookBoard",components:{BookCard:A},props:["books","curPage","totalPage"],methods:{borrowBook:function(t){this.$emit("borrow-book",t)},returnBook:function(t){this.$emit("return-book",t)}}},q=R,z=(o("6eb0"),Object(c["a"])(q,S,N,!1,null,"4a73ff3a",null)),D=z.exports,F={name:"Info",components:{BookBoard:D,Loading:E},props:["loading","user","books","listType","curPage","totalPage"],methods:{pageChange:function(t){this.$emit("page-change",t)},borrowBook:function(t){this.$emit("borrow-book",t)},returnBook:function(t){this.$emit("return-book",t)}}},G=F,K=(o("b239"),Object(c["a"])(G,P,T,!1,null,"12a66eb2",null)),Q=K.exports,W={name:"Index",components:{Info:Q,Option:$,Header:k},data:function(){return{user:{name:null},sortType:1,listType:1,curPage:1,totalPage:1,searchText:"",loading:!0,books:[]}},methods:{checkCurUser:function(){var t=this;fetch("api/user/cur",{credentials:"include"}).then((function(t){return t.json()})).then((function(e){t.user=e}))},logout:function(){fetch("api/account/logout",{credentials:"include"}).then((function(){location.reload()}))},search:function(t){this.curPage=1,this.searchText=t,this.refreshBookList()},sortTypeChange:function(t){this.sortType=t,this.refreshBookList()},listTypeChange:function(t){this.listType=t,this.refreshBookList()},pageChange:function(t){this.curPage=t,this.refreshBookList()},borrowBook:function(t){var e=this;fetch("api/book/borrow",{credentials:"include",body:"bid="+t,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){return t.json()})).then((function(t){var o="借阅成功";1===t.code?e.refreshBookList():o=t.msg,alert(o)}))},returnBook:function(t){var e=this;fetch("api/book/return",{credentials:"include",body:"bid="+t,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){return t.json()})).then((function(t){var o="归还成功";1===t.code?e.refreshBookList():o=t.msg,alert(o)}))},refreshBookList:function(){var t=this;this.loading=!0;var e="page="+this.curPage+"&sortType="+this.sortType+"&listType="+this.listType+"&search="+this.searchText;fetch("api/book/list",{credentials:"include",body:e,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){return t.json()})).then((function(e){t.totalPage=e.pages,t.books=e.books,t.loading=!1}))}},created:function(){this.refreshBookList()}},X=W,Y=(o("0bce"),Object(c["a"])(X,d,f,!1,null,"bbead208",null)),Z=Y.exports,tt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Logo"),o("div",{staticClass:"login-text"},[t._v("登录Void Library")]),o("div",{staticClass:"login-adv"},[t._v("(广告位招租)")]),""!==t.errorMsg?o("div",{staticClass:"alert alert-danger"},[t._v(t._s(t.errorMsg))]):t._e(),o("form",{staticClass:"login-form"},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"username"}},[t._v("用户名:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",id:"username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"pwd"}},[t._v("密码:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.pwd,expression:"pwd"}],staticClass:"form-control",attrs:{type:"password",id:"pwd"},domProps:{value:t.pwd},on:{input:function(e){e.target.composing||(t.pwd=e.target.value)}}})]),o("button",{staticClass:"btn btn-primary btn-login",attrs:{type:"button"},on:{click:t.login}},[t._v("登录")])]),o("div",{staticClass:"login-reg"},[t._v(" 没有账号？ "),o("a",{attrs:{href:""},on:{click:function(e){return t.$router.push({path:"/reg"})}}},[t._v(" 点击注册 ")])])],1)},et=[],ot=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"logo"},[t._v("VL")])},nt=[],rt={name:"Logo"},at=rt,st=(o("d2d3"),Object(c["a"])(at,ot,nt,!1,null,"74bfc230",null)),it=st.exports,ct={name:"Login",components:{Logo:it},data:function(){return{errorMsg:"",username:"",pwd:""}},methods:{login:function(){var t=this;this.errorMsg="",""!==this.username?""!==this.pwd?fetch("api/account/login",{credentials:"include",body:"username="+this.username+"&password="+this.pwd,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){return t.json()})).then((function(e){0===e.code?t.errorMsg=e.msg:"admin"===e.type?t.$router.push({path:"/admin"}):t.$router.push({path:"/"})})):this.errorMsg="密码不能为空":this.errorMsg="用户名不能为空"}}},ut=ct,lt=(o("4aa8"),Object(c["a"])(ut,tt,et,!1,null,"0c7eec94",null)),pt=lt.exports,dt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Logo"),o("div",{staticClass:"reg-text"},[t._v("加入Void Library")]),o("div",{staticClass:"reg-adv"},[t._v("(广告位招租)")]),""!==t.errorMsg?o("div",{staticClass:"alert alert-danger"},[t._v(t._s(t.errorMsg))]):t._e(),o("form",{staticClass:"reg-form"},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"username"}},[t._v("用户名:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",id:"username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"pwd"}},[t._v("密码:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.pwd,expression:"pwd"}],staticClass:"form-control",attrs:{type:"password",id:"pwd"},domProps:{value:t.pwd},on:{input:function(e){e.target.composing||(t.pwd=e.target.value)}}})]),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"rep"}},[t._v("重复密码:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.rep,expression:"rep"}],staticClass:"form-control",attrs:{type:"password",id:"rep"},domProps:{value:t.rep},on:{input:function(e){e.target.composing||(t.rep=e.target.value)}}})]),o("button",{staticClass:"btn btn-primary btn-reg",attrs:{type:"button"},on:{click:t.reg}},[t._v("注册")])])],1)},ft=[],ht={name:"Reg",components:{Logo:it},data:function(){return{errorMsg:"",username:"",pwd:"",rep:""}},methods:{reg:function(){var t=this;this.errorMsg="",""!==this.username?""!==this.pwd?""!==this.rep?this.pwd===this.rep?fetch("api/account/reg",{credentials:"include",body:"username="+this.username+"&password="+this.pwd,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){return t.json()})).then((function(e){0===e.code?t.errorMsg=e.msg:"admin"===e.type?t.$router.push({path:"/admin"}):t.$router.push({path:"/"})})):this.errorMsg="两次密码输入不一致":this.errorMsg="请重复密码":this.errorMsg="密码不能为空":this.errorMsg="用户名不能为空"}}},vt=ht,bt=(o("93a5"),Object(c["a"])(vt,dt,ft,!1,null,"c0f72d64",null)),mt=bt.exports;n["a"].use(p["a"]);var gt=[{path:"/",component:Z},{path:"/login",component:pt},{path:"/reg",component:mt}],kt=new p["a"]({routes:gt,mode:"history"});o("ab8b"),o("3e48");n["a"].config.productionTip=!1,new n["a"]({router:kt,render:function(t){return t(l)}}).$mount("#app")},"695d":function(t,e,o){},"6eb0":function(t,e,o){"use strict";var n=o("295b"),r=o.n(n);r.a},"85ec":function(t,e,o){},"93a5":function(t,e,o){"use strict";var n=o("695d"),r=o.n(n);r.a},"944f":function(t,e,o){},b239:function(t,e,o){"use strict";var n=o("4982"),r=o.n(n);r.a},bdd0:function(t,e,o){},cfc9:function(t,e,o){"use strict";var n=o("bdd0"),r=o.n(n);r.a},d2d3:function(t,e,o){"use strict";var n=o("f624"),r=o.n(n);r.a},e136:function(t,e,o){},f624:function(t,e,o){}});
//# sourceMappingURL=app.aa296c2b.js.map