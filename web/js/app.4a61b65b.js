(function(t){function e(e){for(var a,o,i=e[0],c=e[1],l=e[2],p=0,d=[];p<i.length;p++)o=i[p],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(d.length)d.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,i=1;i<n.length;i++){var c=n[i];0!==r[c]&&(a=!1)}a&&(s.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},r={app:0},s=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("85ec"),r=n.n(a);r.a},"0f81":function(t,e,n){"use strict";var a=n("4efe"),r=n.n(a);r.a},"11ba":function(t,e,n){"use strict";var a=n("e136"),r=n.n(a);r.a},"19c5":function(t,e,n){"use strict";var a=n("5569"),r=n.n(a);r.a},3078:function(t,e,n){"use strict";var a=n("33b0"),r=n.n(a);r.a},"33b0":function(t,e,n){},"49a7":function(t,e,n){},"4aa8":function(t,e,n){"use strict";var a=n("49a7"),r=n.n(a);r.a},"4efe":function(t,e,n){},5569:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},s=[],o={name:"App"},i=o,c=(n("034f"),n("2877")),l=Object(c["a"])(i,r,s,!1,null,null,null),u=l.exports,p=n("8c4f"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("Header",{attrs:{user:t.user},on:{logout:t.logout,"check-cur-user":t.checkCurUser}}),n("Option",{on:{search:t.search,"sort-type-change":t.sortTypeChange}}),n("Info",{attrs:{loading:t.loading,user:t.user,books:t.books,"list-type":t.listType,"cur-page":t.curPage,"total-page":t.totalPage},on:{"page-change":t.pageChange,"list-type-change":t.listTypeChange}})],1)},f=[],h=(n("d3b7"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("div",{staticClass:"header-logo"},[t._v("VL")]),null===t.user.name?n("div",{staticClass:"div-header-btn"},[n("button",{staticClass:"btn btn-header btn-header-login",attrs:{type:"button"},on:{click:function(e){return t.$router.push({path:"/login"})}}},[t._v("登录")])]):n("div",{staticClass:"div-header-btn"},[n("button",{staticClass:"btn btn-header btn-header-reg",attrs:{type:"button"}},[t._v("用户: "+t._s(t.user.name))]),n("button",{staticClass:"btn btn-header btn-header-login",attrs:{type:"button"},on:{click:function(e){return t.$emit("logout")}}},[t._v("退出")])])])}),v=[],g={name:"Header",props:["user"],created:function(){this.$emit("check-cur-user")}},m=g,b=(n("19c5"),Object(c["a"])(m,h,v,!1,null,"6cfa8c5e",null)),_=b.exports,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"opt-container"},[t._m(0),n("input",{attrs:{id:"search","aria-label":"search",placeholder:"搜索..."},on:{input:function(e){return t.$emit("search",e.target.value)}}}),n("div",{attrs:{id:"sort-by"}},[n("div",{staticClass:"btn-group",attrs:{"data-toggle":"buttons"}},[n("label",{staticClass:"btn btn-primary active",attrs:{id:"sort-by-hot"}},[n("input",{attrs:{type:"radio",name:"options",checked:""},on:{click:function(e){return t.$emit("sort-type-change",1)}}}),t._v(" 按热度排序 ")]),n("label",{staticClass:"btn btn-primary",attrs:{id:"sort-by-time"}},[n("input",{attrs:{type:"radio",name:"options"},on:{click:function(e){return t.$emit("sort-type-change",2)}}}),t._v(" 按时间排序 ")])])])])},C=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",[t._v("欢迎来到"),n("br"),t._v("Void Library")])}],k={name:"Option"},w=k,x=(n("cfc9"),Object(c["a"])(w,y,C,!1,null,"85579be4",null)),$=x.exports,P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"info-container"},[n("ul",{staticClass:"nav nav-tabs"},[n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",class:{active:1===t.listType},on:{click:function(e){return t.$emit("list-type-change",1)}}},[t._v("全馆浏览")])]),n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",class:{active:2===t.listType},on:{click:function(e){return t.$emit("list-type-change",2)}}},[t._v("我的借阅")])])]),null===t.user.name&&2===t.listType?n("div",{staticClass:"empty-text"},[n("a",{attrs:{href:""},on:{click:function(e){return t.$router.push({path:"/login"})}}},[t._v("登录")]),t._v(" 后即可查看“我的借阅”信息 ")]):null===t.books||0===t.books.length?n("div",{staticClass:"empty-text"},[t._v(" 暂无相关书目信息 ")]):n("BookBoard",{attrs:{books:t.books,"cur-page":t.curPage,"total-page":t.totalPage},on:{"page-change":t.pageChange}})],1)},O=[],T=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},j=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"loading"},[n("span"),n("span"),n("span"),n("span"),n("span")]),n("div",{staticClass:"loading-text"},[t._v(" Loading... ")])])}],L={name:"Loading"},M=L,B=(n("11ba"),Object(c["a"])(M,T,j,!1,null,"aea24f56",null)),E=B.exports,S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"book-board"},[n("div",{staticClass:"row"},t._l(t.books,(function(t){return n("BookCard",{key:t.id,attrs:{book:t}})})),1),n("div",{staticClass:"pages"},[n("ul",{staticClass:"pagination justify-content-center"},t._l(t.totalPage,(function(e){return n("li",{key:e,staticClass:"page-item",class:{active:e===t.curPage},on:{click:function(n){return t.$emit("page-change",e)}}},[n("a",{staticClass:"page-link"},[t._v(t._s(e))])])})),0)])])},N=[],V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-se"},[n("a",{attrs:{href:""},on:{click:function(e){return t.$router.push({path:"/detail/book/"+t.book.id})}}},[n("div",{staticClass:"book-card"},[n("div",{staticClass:"book-card-name"},[t._v(t._s(t.book.name))]),n("div",{staticClass:"book-card-author"},[t._v(t._s(t.book.author)+" 著")]),n("div",{staticClass:"tags"},[2!==t.book.status?n("span",{staticClass:"label label-c"},[t._v("已收录")]):n("span",{staticClass:"label label-n-c"},[t._v("未收录")]),t.book.count>0?n("span",{staticClass:"label label-b"},[t._v("可借阅")]):n("span",{staticClass:"label label-n-b"},[t._v("无库存")])])])])])},I=[],H={name:"BookCard",props:["book"]},J=H,U=(n("746f"),Object(c["a"])(J,V,I,!1,null,"ba6a7a7a",null)),A=U.exports,D={name:"BookBoard",components:{BookCard:A},props:["books","curPage","totalPage"]},R=D,q=(n("0f81"),Object(c["a"])(R,S,N,!1,null,"ea1f6e40",null)),z=q.exports,F={name:"Info",components:{BookBoard:z,Loading:E},props:["loading","user","books","listType","curPage","totalPage"],methods:{pageChange:function(t){this.$emit("page-change",t)}}},G=F,K=(n("3078"),Object(c["a"])(G,P,O,!1,null,"4dc0a23c",null)),Q=K.exports,W={name:"Index",components:{Info:Q,Option:$,Header:_},data:function(){return{user:{name:null},sortType:1,listType:1,curPage:1,totalPage:1,searchText:"",loading:!0,books:[]}},methods:{checkCurUser:function(){var t=this;fetch("api/user/cur",{credentials:"include"}).then((function(t){return t.json()})).then((function(e){t.user=e}))},logout:function(){fetch("api/account/logout",{credentials:"include"}).then((function(){location.reload()}))},search:function(t){this.curPage=1,this.searchText=t,this.refreshBookList()},sortTypeChange:function(t){this.sortType=t,this.refreshBookList()},listTypeChange:function(t){this.listType=t,this.refreshBookList()},pageChange:function(t){this.curPage=t,this.refreshBookList()},refreshBookList:function(){var t=this;this.loading=!0;var e="page="+this.curPage+"&sortType="+this.sortType+"&listType="+this.listType+"&search="+this.searchText;fetch("api/book/list",{credentials:"include",body:e,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){return t.json()})).then((function(e){t.totalPage=e.pages,t.books=e.books,t.loading=!1}))}},created:function(){this.refreshBookList()}},X=W,Y=(n("73a5"),Object(c["a"])(X,d,f,!1,null,"4bb93b2c",null)),Z=Y.exports,tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Logo"),n("div",{staticClass:"login-text"},[t._v("登录Void Library")]),n("div",{staticClass:"login-adv"},[t._v("(广告位招租)")]),""!==t.errorMsg?n("div",{staticClass:"alert alert-danger"},[t._v(t._s(t.errorMsg))]):t._e(),n("form",{staticClass:"login-form"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"username"}},[t._v("用户名:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",id:"username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"pwd"}},[t._v("密码:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.pwd,expression:"pwd"}],staticClass:"form-control",attrs:{type:"password",id:"pwd"},domProps:{value:t.pwd},on:{input:function(e){e.target.composing||(t.pwd=e.target.value)}}})]),n("button",{staticClass:"btn btn-primary btn-login",attrs:{type:"button"},on:{click:t.login}},[t._v("登录")])]),n("div",{staticClass:"login-reg"},[t._v(" 没有账号？ "),n("a",{attrs:{href:""},on:{click:function(e){return t.$router.push({path:"/reg"})}}},[t._v(" 点击注册 ")])])],1)},et=[],nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"logo"},[t._v("VL")])},at=[],rt={name:"Logo"},st=rt,ot=(n("d2d3"),Object(c["a"])(st,nt,at,!1,null,"74bfc230",null)),it=ot.exports,ct={name:"Login",components:{Logo:it},data:function(){return{errorMsg:"",username:"",pwd:""}},methods:{login:function(){var t=this;this.errorMsg="",""!==this.username?""!==this.pwd?fetch("api/account/login",{credentials:"include",body:"username="+this.username+"&password="+this.pwd,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){return t.json()})).then((function(e){0===e.code?t.errorMsg=e.msg:"admin"===e.type?t.$router.push({path:"/admin"}):t.$router.push({path:"/"})})):this.errorMsg="密码不能为空":this.errorMsg="用户名不能为空"}}},lt=ct,ut=(n("4aa8"),Object(c["a"])(lt,tt,et,!1,null,"0c7eec94",null)),pt=ut.exports,dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Logo"),n("div",{staticClass:"reg-text"},[t._v("加入Void Library")]),n("div",{staticClass:"reg-adv"},[t._v("(广告位招租)")]),""!==t.errorMsg?n("div",{staticClass:"alert alert-danger"},[t._v(t._s(t.errorMsg))]):t._e(),n("form",{staticClass:"reg-form"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"username"}},[t._v("用户名:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",id:"username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"pwd"}},[t._v("密码:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.pwd,expression:"pwd"}],staticClass:"form-control",attrs:{type:"password",id:"pwd"},domProps:{value:t.pwd},on:{input:function(e){e.target.composing||(t.pwd=e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"rep"}},[t._v("重复密码:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.rep,expression:"rep"}],staticClass:"form-control",attrs:{type:"password",id:"rep"},domProps:{value:t.rep},on:{input:function(e){e.target.composing||(t.rep=e.target.value)}}})]),n("button",{staticClass:"btn btn-primary btn-reg",attrs:{type:"button"},on:{click:t.reg}},[t._v("注册")])])],1)},ft=[],ht={name:"Reg",components:{Logo:it},data:function(){return{errorMsg:"",username:"",pwd:"",rep:""}},methods:{reg:function(){var t=this;this.errorMsg="",""!==this.username?""!==this.pwd?""!==this.rep?this.pwd===this.rep?fetch("api/account/reg",{credentials:"include",body:"username="+this.username+"&password="+this.pwd,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){return t.json()})).then((function(e){0===e.code?t.errorMsg=e.msg:"admin"===e.type?t.$router.push({path:"/admin"}):t.$router.push({path:"/"})})):this.errorMsg="两次密码输入不一致":this.errorMsg="请重复密码":this.errorMsg="密码不能为空":this.errorMsg="用户名不能为空"}}},vt=ht,gt=(n("93a5"),Object(c["a"])(vt,dt,ft,!1,null,"c0f72d64",null)),mt=gt.exports,bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{domProps:{textContent:t._s(t.$route.params.bid)}})},_t=[],yt={name:"BookDetail"},Ct=yt,kt=Object(c["a"])(Ct,bt,_t,!1,null,"4d26e0ba",null),wt=kt.exports;a["a"].use(p["a"]);var xt=[{path:"/",component:Z},{path:"/login",component:pt},{path:"/reg",component:mt},{path:"/detail/book/:bid",component:wt}],$t=new p["a"]({routes:xt,mode:"history"});n("ab8b"),n("3e48");a["a"].config.productionTip=!1,new a["a"]({router:$t,render:function(t){return t(u)}}).$mount("#app")},"695d":function(t,e,n){},"73a5":function(t,e,n){"use strict";var a=n("b96f"),r=n.n(a);r.a},"746f":function(t,e,n){"use strict";var a=n("fe76"),r=n.n(a);r.a},"85ec":function(t,e,n){},"93a5":function(t,e,n){"use strict";var a=n("695d"),r=n.n(a);r.a},b96f:function(t,e,n){},bdd0:function(t,e,n){},cfc9:function(t,e,n){"use strict";var a=n("bdd0"),r=n.n(a);r.a},d2d3:function(t,e,n){"use strict";var a=n("f624"),r=n.n(a);r.a},e136:function(t,e,n){},f624:function(t,e,n){},fe76:function(t,e,n){}});
//# sourceMappingURL=app.4a61b65b.js.map