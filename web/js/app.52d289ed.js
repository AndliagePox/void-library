(function(t){function e(e){for(var o,s,i=e[0],c=e[1],l=e[2],d=0,p=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&p.push(n[s][0]),n[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],o=!0,i=1;i<a.length;i++){var c=a[i];0!==n[c]&&(o=!1)}o&&(r.splice(e--,1),t=s(s.s=a[0]))}return t}var o={},n={app:0},r=[];function s(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=o,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(a,o,function(e){return t[e]}.bind(null,o));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"013f":function(t,e,a){},"034f":function(t,e,a){"use strict";var o=a("85ec"),n=a.n(o);n.a},"0425":function(t,e,a){},"0690":function(t,e,a){},"19c5":function(t,e,a){"use strict";var o=a("5569"),n=a.n(o);n.a},2100:function(t,e,a){"use strict";var o=a("d9fd"),n=a.n(o);n.a},"295b":function(t,e,a){},"2a7d":function(t,e,a){},"32e3":function(t,e,a){"use strict";var o=a("775a"),n=a.n(o);n.a},"387f":function(t,e,a){"use strict";var o=a("fa59"),n=a.n(o);n.a},3936:function(t,e,a){},4059:function(t,e,a){"use strict";var o=a("d3c5"),n=a.n(o);n.a},"41cd":function(t,e,a){},"45f6":function(t,e,a){},5569:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],s={name:"App"},i=s,c=(a("034f"),a("2877")),l=Object(c["a"])(i,n,r,!1,null,null,null),u=l.exports,d=a("8c4f"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("Header",{attrs:{user:t.user},on:{logout:t.logout,"check-cur-user":t.checkCurUser}}),a("Option",{on:{search:t.search,"sort-type-change":t.sortTypeChange}}),a("Info",{attrs:{loading:t.loading,user:t.user,books:t.books,"list-type":t.listType,"cur-page":t.curPage,"total-page":t.totalPage},on:{"page-change":t.pageChange,"list-type-change":t.listTypeChange,"borrow-book":t.borrowBook,"return-book":t.returnBook}})],1)},m=[],h=(a("d3b7"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("div",{staticClass:"header-logo"},[t._v("VL")]),null===t.user.name?a("div",{staticClass:"div-header-btn"},[a("button",{staticClass:"btn btn-header btn-header-login",attrs:{type:"button"},on:{click:function(e){return t.$router.push({path:"/login"})}}},[t._v("登录")])]):a("div",{staticClass:"div-header-btn"},[a("button",{staticClass:"btn btn-header btn-header-reg",attrs:{type:"button"}},[t._v("用户: "+t._s(t.user.name))]),a("button",{staticClass:"btn btn-header btn-header-login",attrs:{type:"button"},on:{click:function(e){return t.$emit("logout")}}},[t._v("退出")])])])}),f=[],v={name:"Header",props:["user"],created:function(){this.$emit("check-cur-user")}},g=v,b=(a("19c5"),Object(c["a"])(g,h,f,!1,null,"6cfa8c5e",null)),_=b.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"opt-container"},[t._m(0),a("input",{attrs:{id:"search","aria-label":"search",placeholder:"搜索..."},on:{input:function(e){return t.$emit("search",e.target.value)}}}),a("div",{attrs:{id:"sort-by"}},[a("div",{staticClass:"btn-group",attrs:{"data-toggle":"buttons"}},[a("label",{staticClass:"btn btn-primary active",attrs:{id:"sort-by-hot"}},[a("input",{attrs:{type:"radio",name:"options",checked:""},on:{click:function(e){return t.$emit("sort-type-change",1)}}}),t._v(" 按热度排序 ")]),a("label",{staticClass:"btn btn-primary",attrs:{id:"sort-by-time"}},[a("input",{attrs:{type:"radio",name:"options"},on:{click:function(e){return t.$emit("sort-type-change",2)}}}),t._v(" 按时间排序 ")])])])])},k=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h1",[t._v("欢迎来到"),a("br"),t._v("Void Library")])}],y={name:"Option"},w=y,x=(a("cfc9"),Object(c["a"])(w,C,k,!1,null,"85579be4",null)),P=x.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"info-container"},[a("ul",{staticClass:"nav nav-tabs"},[a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",class:{active:1===t.listType},on:{click:function(e){return t.$emit("list-type-change",1)}}},[t._v("全馆浏览")])]),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",class:{active:2===t.listType},on:{click:function(e){return t.$emit("list-type-change",2)}}},[t._v("我的借阅")])])]),null===t.user.name&&2===t.listType?a("div",{staticClass:"empty-text"},[a("a",{attrs:{href:""},on:{click:function(e){return t.$router.push({path:"/login"})}}},[t._v("登录")]),t._v(" 后即可查看“我的借阅”信息 ")]):null===t.books||0===t.books.length?a("div",{staticClass:"empty-text"},[t._v(" 暂无相关书目信息 ")]):a("BookBoard",{attrs:{books:t.books,"cur-page":t.curPage,"total-page":t.totalPage},on:{"page-change":t.pageChange,"borrow-book":t.borrowBook,"return-book":t.returnBook}})],1)},T=[],j=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},L=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"loading"},[a("span"),a("span"),a("span"),a("span"),a("span")]),a("div",{staticClass:"loading-text"},[t._v(" Loading... ")])])}],M={name:"Loading"},O=M,B=(a("acfd"),Object(c["a"])(O,j,L,!1,null,"660f9e35",null)),N=B.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"book-board"},[a("div",{staticClass:"row"},t._l(t.books,(function(e){return a("BookCard",{key:e.id,attrs:{book:e},on:{"borrow-book":t.borrowBook,"return-book":t.returnBook}})})),1),a("div",{staticClass:"pages"},[a("ul",{staticClass:"pagination justify-content-center"},t._l(t.totalPage,(function(e){return a("li",{key:e,staticClass:"page-item",class:{active:e===t.curPage},on:{click:function(a){return t.$emit("page-change",e)}}},[a("a",{staticClass:"page-link"},[t._v(t._s(e))])])})),0)])])},S=[],U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-se"},[a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.option(t.book.option,t.book.id)}}},[a("div",{staticClass:"book-card"},[a("div",{staticClass:"book-card-name"},[t._v(t._s(t.book.name))]),a("div",{staticClass:"book-card-intro"},[t._v(t._s(t.book.intro)+" ")]),a("table",[a("tr",[a("td",[t._v("作者：")]),a("td",[t._v(t._s(t.book.author))])]),a("tr",[a("td",[t._v("热度：")]),a("td",[t._v(t._s(t.book.hot))])]),a("tr",[a("td",[t._v("上架时间：")]),a("td",[t._v(t._s(t.book.time))])])]),1===t.book.option?a("div",{staticClass:"book-card-option"},[t._v(" (点击卡片 "),a("b",{staticClass:"option-borrow"},[t._v("借阅")]),t._v(" 本书) ")]):2===t.book.option?a("div",{staticClass:"book-card-option"},[t._v(" (点击卡片 "),a("b",{staticClass:"option-return"},[t._v("归还")]),t._v(" 本书) ")]):3===t.book.option?a("div",{staticClass:"book-card-option"},[t._v(" (此书 "),a("b",{staticClass:"option-no"},[t._v("暂无库存")]),t._v(" 不可借阅) ")]):4===t.book.option?a("div",{staticClass:"book-card-option"},[t._v(" (借阅数 "),a("b",{staticClass:"option-no"},[t._v("已达上限")]),t._v(" 不可借阅) ")]):a("div",{staticClass:"book-card-option"},[t._v(" (请先 "),a("b",{staticClass:"option-login"},[t._v("登录")]),t._v(" 以进行更多操作) ")])])])])},I=[],H={name:"BookCard",props:["book"],methods:{option:function(t,e){1===t?this.$emit("borrow-book",e):2===t&&this.$emit("return-book",e)}}},V=H,A=(a("70dd"),Object(c["a"])(V,U,I,!1,null,"180bf1c9",null)),D=A.exports,F={name:"BookBoard",components:{BookCard:D},props:["books","curPage","totalPage"],methods:{borrowBook:function(t){this.$emit("borrow-book",t)},returnBook:function(t){this.$emit("return-book",t)}}},J=F,R=(a("6eb0"),Object(c["a"])(J,E,S,!1,null,"4a73ff3a",null)),q=R.exports,z={name:"Info",components:{BookBoard:q,Loading:N},props:["loading","user","books","listType","curPage","totalPage"],methods:{pageChange:function(t){this.$emit("page-change",t)},borrowBook:function(t){this.$emit("borrow-book",t)},returnBook:function(t){this.$emit("return-book",t)}}},G=z,K=(a("cc77"),Object(c["a"])(G,$,T,!1,null,"d9c6f5dc",null)),Q=K.exports,W={name:"Index",components:{Info:Q,Option:P,Header:_},data:function(){return{user:{name:null},sortType:1,listType:1,curPage:1,totalPage:1,searchText:"",loading:!0,books:[]}},methods:{checkCurUser:function(){var t=this;fetch("/api/user/cur",{credentials:"include"}).then((function(t){return t.json()})).then((function(e){t.user=e}))},logout:function(){fetch("/api/account/logout",{credentials:"include"}).then((function(){location.reload()}))},search:function(t){this.curPage=1,this.searchText=t,this.refreshBookList()},sortTypeChange:function(t){this.sortType=t,this.refreshBookList()},listTypeChange:function(t){this.listType=t,this.refreshBookList()},pageChange:function(t){this.curPage=t,this.refreshBookList()},borrowBook:function(t){var e=this;fetch("/api/book/borrow",{credentials:"include",body:"bid="+t,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){return t.json()})).then((function(t){var a="借阅成功";1===t.code?e.refreshBookList():a=t.msg,alert(a)}))},returnBook:function(t){var e=this;fetch("/api/book/return",{credentials:"include",body:"bid="+t,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){return t.json()})).then((function(t){var a="归还成功";1===t.code?e.refreshBookList():a=t.msg,alert(a)}))},refreshBookList:function(){var t=this;this.loading=!0;var e="page="+this.curPage+"&sortType="+this.sortType+"&listType="+this.listType+"&search="+this.searchText;fetch("/api/book/list",{credentials:"include",body:e,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){return t.json()})).then((function(e){t.totalPage=e.pages,t.books=e.books,t.loading=!1}))}},created:function(){this.refreshBookList()}},X=W,Y=(a("2100"),Object(c["a"])(X,p,m,!1,null,"154f9703",null)),Z=Y.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Logo"),a("div",{staticClass:"login-text"},[t._v("登录Void Library")]),a("div",{staticClass:"login-adv"},[t._v("(广告位招租)")]),""!==t.errorMsg?a("div",{staticClass:"alert alert-danger"},[t._v(t._s(t.errorMsg))]):t._e(),a("form",{staticClass:"login-form"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"username"}},[t._v("用户名:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",id:"username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"pwd"}},[t._v("密码:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.pwd,expression:"pwd"}],staticClass:"form-control",attrs:{type:"password",id:"pwd"},domProps:{value:t.pwd},on:{input:function(e){e.target.composing||(t.pwd=e.target.value)}}})]),a("button",{staticClass:"btn btn-primary btn-login",attrs:{type:"button"},on:{click:t.login}},[t._v("登录")])]),a("div",{staticClass:"login-reg"},[t._v(" 没有账号？ "),a("a",{attrs:{href:""},on:{click:function(e){return t.$router.push({path:"/reg"})}}},[t._v(" 点击注册 ")])])],1)},et=[],at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"logo"},[t._v("VL")])},ot=[],nt={name:"Logo"},rt=nt,st=(a("d2d3"),Object(c["a"])(rt,at,ot,!1,null,"74bfc230",null)),it=st.exports,ct={name:"Login",components:{Logo:it},data:function(){return{errorMsg:"",username:"",pwd:""}},methods:{login:function(){var t=this;this.errorMsg="",""!==this.username?""!==this.pwd?fetch("/api/account/login",{credentials:"include",body:"username="+this.username+"&password="+this.pwd,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){return t.json()})).then((function(e){0===e.code?t.errorMsg=e.msg:"admin"===e.type?t.$router.push({path:"/admin/book"}):t.$router.push({path:"/"})})):this.errorMsg="密码不能为空":this.errorMsg="用户名不能为空"}}},lt=ct,ut=(a("71c9"),Object(c["a"])(lt,tt,et,!1,null,"5cbc366f",null)),dt=ut.exports,pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Logo"),a("div",{staticClass:"reg-text"},[t._v("加入Void Library")]),a("div",{staticClass:"reg-adv"},[t._v("(广告位招租)")]),""!==t.errorMsg?a("div",{staticClass:"alert alert-danger"},[t._v(t._s(t.errorMsg))]):t._e(),a("form",{staticClass:"reg-form"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"username"}},[t._v("用户名:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",id:"username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"pwd"}},[t._v("密码:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.pwd,expression:"pwd"}],staticClass:"form-control",attrs:{type:"password",id:"pwd"},domProps:{value:t.pwd},on:{input:function(e){e.target.composing||(t.pwd=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"rep"}},[t._v("重复密码:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.rep,expression:"rep"}],staticClass:"form-control",attrs:{type:"password",id:"rep"},domProps:{value:t.rep},on:{input:function(e){e.target.composing||(t.rep=e.target.value)}}})]),a("button",{staticClass:"btn btn-primary btn-reg",attrs:{type:"button"},on:{click:t.reg}},[t._v("注册")])])],1)},mt=[],ht={name:"Reg",components:{Logo:it},data:function(){return{errorMsg:"",username:"",pwd:"",rep:""}},methods:{reg:function(){var t=this;this.errorMsg="",""!==this.username?""!==this.pwd?""!==this.rep?this.pwd===this.rep?fetch("/api/account/reg",{credentials:"include",body:"username="+this.username+"&password="+this.pwd,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){return t.json()})).then((function(e){0===e.code?t.errorMsg=e.msg:"admin"===e.type?t.$router.push({path:"/admin/book"}):t.$router.push({path:"/"})})):this.errorMsg="两次密码输入不一致":this.errorMsg="请重复密码":this.errorMsg="密码不能为空":this.errorMsg="用户名不能为空"}}},ft=ht,vt=(a("32e3"),Object(c["a"])(ft,pt,mt,!1,null,"206cde5d",null)),gt=vt.exports,bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("Nav",{attrs:{page:"book"}}),a("div",{staticClass:"form-group"},[a("input",{staticClass:"form-control",attrs:{"aria-label":"search",placeholder:"搜索...",type:"text",id:"search"},on:{input:function(e){return t.search(e.target.value)}}}),a("div",{staticClass:"btn",attrs:{id:"add"},on:{click:function(e){return t.$router.push({path:"/admin/book/add"})}}},[t._v("上架新书")])]),t.loading?t._e():a("table",{staticClass:"table"},[t._m(0),a("tbody",t._l(t.books,(function(e){return a("tr",{key:e.id,on:{click:function(a){return t.$router.push({path:"/admin/book/detail/"+e.id})}}},[a("td",[t._v(t._s(e.id))]),a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.author))]),a("td",[t._v(t._s(e.hot))])])})),0)]),t.loading?t._e():a("div",{staticClass:"pages"},[a("ul",{staticClass:"pagination justify-content-center"},t._l(t.totalPage,(function(e){return a("li",{key:e,staticClass:"page-item",class:{active:e===t.curPage}},[a("a",{staticClass:"page-link",on:{click:function(a){return t.pageChange(e)}}},[t._v(t._s(e))])])})),0)]),t.loading?a("Loading"):t._e()],1)},_t=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"col-id"},[t._v("Id")]),a("th",{staticClass:"col-book-name"},[t._v("书名")]),a("th",{staticClass:"col-author"},[t._v("作者")]),a("th",{staticClass:"col-hot"},[t._v("热度")])])])}],Ct=(a("b0c0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"navbar navbar-expand-md bg-dark navbar-dark"},[a("div",{staticClass:"navbar-brand navbar-logo"},[t._v("LV")]),t._m(0),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"collapsibleNavbar"}},[a("ul",{staticClass:"navbar-nav"},[a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",class:{active:"book"===t.page},on:{click:function(e){return t.$router.push({path:"/admin/book"})}}},[t._v("书籍管理")])]),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",class:{active:"user"===t.page},on:{click:function(e){return t.$router.push({path:"/admin/user"})}}},[t._v("用户管理")])]),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",class:{active:"brLog"===t.page},on:{click:function(e){return t.$router.push({path:"/admin/br_log"})}}},[t._v("借还日志")])]),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",class:{active:"opLog"===t.page},on:{click:function(e){return t.$router.push({path:"/admin/op_log"})}}},[t._v("操作日志")])])])])])}),kt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#collapsibleNavbar"}},[a("span",{staticClass:"navbar-toggler-icon"})])}],yt={name:"Nav",props:["page"]},wt=yt,xt=(a("4059"),Object(c["a"])(wt,Ct,kt,!1,null,"083c6a36",null)),Pt=xt.exports,$t={name:"Book",components:{Loading:N,Nav:Pt},data:function(){return{admin:{name:null},loading:!0,curPage:1,totalPage:5,searchText:"",books:[]}},methods:{pageChange:function(t){this.curPage=t,this.refreshBookList()},search:function(t){this.curPage=1,this.searchText=t,this.refreshBookList()},refreshBookList:function(){var t=this;this.loading=!0;var e="page="+this.curPage+"&sortType=1&listType=1&search="+this.searchText;fetch("/api/book/list",{credentials:"include",body:e,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){return t.json()})).then((function(e){t.totalPage=e.pages,t.books=e.books,t.loading=!1}))}},created:function(){var t=this;fetch("/api/admin/cur",{credentials:"include"}).then((function(t){return t.json()})).then((function(e){t.admin=e,null===e.name?t.$router.push({path:"/login"}):t.refreshBookList()}))}},Tt=$t,jt=(a("67df"),Object(c["a"])(Tt,bt,_t,!1,null,"2533e347",null)),Lt=jt.exports,Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("Nav",{attrs:{page:"user"}}),a("div",{staticClass:"form-group"},[a("input",{staticClass:"form-control",attrs:{"aria-label":"search",placeholder:"搜索...",type:"text",id:"search"},on:{input:function(e){return t.search(e.target.value)}}})]),t.loading?t._e():a("table",{staticClass:"table"},[t._m(0),a("tbody",t._l(t.users,(function(e){return a("tr",{key:e.id,on:{click:function(a){return t.$router.push({path:"/admin/user/detail/"+e.id})}}},[a("td",[t._v(t._s(e.id))]),a("td",[t._v(t._s(e.username))]),a("td",[t._v(t._s(e.hold))]),a("td",[t._v(t._s(e.maxHold))])])})),0)]),t.loading?t._e():a("div",{staticClass:"pages"},[a("ul",{staticClass:"pagination justify-content-center"},t._l(t.totalPage,(function(e){return a("li",{key:e,staticClass:"page-item",class:{active:e===t.curPage}},[a("a",{staticClass:"page-link",on:{click:function(a){return t.pageChange(e)}}},[t._v(t._s(e))])])})),0)]),t.loading?a("Loading"):t._e()],1)},Ot=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"col-id"},[t._v("Id")]),a("th",{staticClass:"col-username"},[t._v("用户名")]),a("th",{staticClass:"col-hold"},[t._v("已借阅")]),a("th",{staticClass:"col-max-hold"},[t._v("可借阅")])])])}],Bt={name:"User",components:{Loading:N,Nav:Pt},data:function(){return{admin:{name:null},loading:!0,curPage:1,totalPage:5,searchText:"",users:[]}},methods:{pageChange:function(t){this.curPage=t,this.refreshUserList()},search:function(t){this.curPage=1,this.searchText=t,this.refreshUserList()},refreshUserList:function(){var t=this;this.loading=!0;var e="page="+this.curPage+"&search="+this.searchText;fetch("/api/user/list",{credentials:"include",body:e,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){return t.json()})).then((function(e){t.totalPage=e.pages,t.users=e.users,t.loading=!1}))}},created:function(){var t=this;fetch("/api/admin/cur",{credentials:"include"}).then((function(t){return t.json()})).then((function(e){t.admin=e,null===e.name?t.$router.push({path:"/login"}):t.refreshUserList()}))}},Nt=Bt,Et=(a("dae6"),Object(c["a"])(Nt,Mt,Ot,!1,null,"ead1085c",null)),St=Et.exports,Ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("Nav",{attrs:{page:"brLog"}}),a("div",{staticClass:"time-point-table"},t._l(t.brLogs,(function(e){return a("TimePoint",{key:e.id,attrs:{time:e.time}},[a("p",{domProps:{innerHTML:t._s(e.content)}})])})),1),t.curPage<t.totalPage&&!t.loading?a("div",{staticClass:"btn",attrs:{id:"more"},on:{click:t.loadMore}},[t._v("加载更多")]):t._e(),t.loading?a("Loading"):t._e()],1)},It=[],Ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"timeline-item",attrs:{"date-is":t.time}},[t._t("default")],2)},Vt=[],At={name:"TimePoint",props:["time"]},Dt=At,Ft=(a("db6e"),Object(c["a"])(Dt,Ht,Vt,!1,null,"0bd1061c",null)),Jt=Ft.exports,Rt={name:"BRLog",components:{Loading:N,TimePoint:Jt,Nav:Pt},data:function(){return{loading:!0,curPage:0,totalPage:1,brLogs:[]}},methods:{loadMore:function(){var t=this;this.loading=!0,this.curPage++;var e="page="+this.curPage;fetch("/api/br_log/list",{credentials:"include",body:e,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){return t.json()})).then((function(e){t.totalPage=e.pages;for(var a=e.logs,o=0;o<a.length;o++)t.brLogs.push(a[o]);t.loading=!1}))}},created:function(){var t=this;fetch("/api/admin/cur",{credentials:"include"}).then((function(t){return t.json()})).then((function(e){t.admin=e,null===e.name?t.$router.push({path:"/login"}):t.loadMore()}))}},qt=Rt,zt=(a("387f"),Object(c["a"])(qt,Ut,It,!1,null,"6929a3fc",null)),Gt=zt.exports,Kt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Qt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("h1",[t._v("404 Not Found")]),a("br"),a("h1",[t._v("页面未找到")]),a("hr")])}],Wt={name:"NotFound"},Xt=Wt,Yt=(a("d63a"),Object(c["a"])(Xt,Kt,Qt,!1,null,"daac9b40",null)),Zt=Yt.exports,te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("Nav",{attrs:{page:"opLog"}}),a("div",{staticClass:"time-point-table"},t._l(t.opLogs,(function(e){return a("TimePoint",{key:e.id,attrs:{time:e.time}},[a("p",{domProps:{innerHTML:t._s(e.content)}})])})),1),t.curPage<t.totalPage&&!t.loading?a("div",{staticClass:"btn",attrs:{id:"more"},on:{click:t.loadMore}},[t._v("加载更多")]):t._e(),t.loading?a("Loading"):t._e()],1)},ee=[],ae={name:"OPLog",components:{Loading:N,TimePoint:Jt,Nav:Pt},data:function(){return{loading:!0,curPage:0,totalPage:1,opLogs:[]}},methods:{loadMore:function(){var t=this;this.loading=!0,this.curPage++;var e="page="+this.curPage;fetch("/api/op_log/list",{credentials:"include",body:e,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){return t.json()})).then((function(e){t.totalPage=e.pages;for(var a=e.logs,o=0;o<a.length;o++)t.opLogs.push(a[o]);t.loading=!1}))}},created:function(){var t=this;fetch("/api/admin/cur",{credentials:"include"}).then((function(t){return t.json()})).then((function(e){t.admin=e,null===e.name?t.$router.push({path:"/login"}):t.loadMore()}))}},oe=ae,ne=(a("c17a"),Object(c["a"])(oe,te,ee,!1,null,"3b204d8e",null)),re=ne.exports,se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"add-text"},[t._v("添加新书")]),""!==t.errorMsg?a("div",{staticClass:"alert alert-danger"},[t._v(t._s(t.errorMsg))]):t._e(),a("form",{staticClass:"add-form"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"name"}},[t._v("书名:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",id:"name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"author"}},[t._v("作者:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.author,expression:"author"}],staticClass:"form-control",attrs:{type:"text",placeholder:"佚名",id:"author"},domProps:{value:t.author},on:{input:function(e){e.target.composing||(t.author=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"hot"}},[t._v("热度:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.hot,expression:"hot"}],staticClass:"form-control",attrs:{type:"number",placeholder:"0",id:"hot"},domProps:{value:t.hot},on:{input:function(e){e.target.composing||(t.hot=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"count"}},[t._v("库存:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.count,expression:"count"}],staticClass:"form-control",attrs:{type:"number",id:"count"},domProps:{value:t.count},on:{input:function(e){e.target.composing||(t.count=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"intro"}},[t._v("简介:")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.intro,expression:"intro"}],staticClass:"form-control",attrs:{type:"number",id:"intro"},domProps:{value:t.intro},on:{input:function(e){e.target.composing||(t.intro=e.target.value)}}})]),a("button",{staticClass:"btn btn-primary btn-add",attrs:{type:"button"},on:{click:t.add}},[t._v("添加")])])])},ie=[],ce={name:"Add",data:function(){return{errorMsg:"",name:"",author:"",hot:"",count:"",intro:""}},methods:{add:function(){var t=this;this.errorMsg="",""!==this.name?""===this.count||this.count<=0?this.errorMsg="库存需大于0":""!==this.intro?(""===this.author&&(this.author="佚名"),""===this.hot&&(this.hot="0"),fetch("/api/book/add",{credentials:"include",body:"name="+this.name+"&author="+this.author+"&hot="+this.hot+"&count="+this.count+"&intro="+this.intro,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){return t.json()})).then((function(e){0===e.code?t.errorMsg=e.msg:(alert("添加成功"),t.$router.push({path:"/admin/book"}))}))):this.errorMsg="简介不能为空":this.errorMsg="书名不能为空"}},created:function(){var t=this;fetch("/api/admin/cur",{credentials:"include"}).then((function(t){return t.json()})).then((function(e){t.admin=e,null===e.name&&t.$router.push({path:"/login"})}))}},le=ce,ue=(a("e079"),Object(c["a"])(le,se,ie,!1,null,"24f7d841",null)),de=ue.exports,pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"book-detail-text"},[t._v("书本详情")]),""!==t.errorMsg?a("div",{staticClass:"alert alert-danger"},[t._v(t._s(t.errorMsg))]):t._e(),t.loading?t._e():a("form",{staticClass:"update-form"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"bid"}},[t._v("Book Id:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.bid,expression:"bid"}],staticClass:"form-control",attrs:{type:"text",id:"bid",disabled:"disabled"},domProps:{value:t.bid},on:{input:function(e){e.target.composing||(t.bid=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"time"}},[t._v("上架时间:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.time,expression:"time"}],staticClass:"form-control",attrs:{type:"text",id:"time",disabled:"disabled"},domProps:{value:t.time},on:{input:function(e){e.target.composing||(t.time=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"name"}},[t._v("书名:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",id:"name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"author"}},[t._v("作者:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.author,expression:"author"}],staticClass:"form-control",attrs:{type:"text",id:"author"},domProps:{value:t.author},on:{input:function(e){e.target.composing||(t.author=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"hot"}},[t._v("热度:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.hot,expression:"hot"}],staticClass:"form-control",attrs:{type:"number",id:"hot"},domProps:{value:t.hot},on:{input:function(e){e.target.composing||(t.hot=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"count"}},[t._v("库存:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.count,expression:"count"}],staticClass:"form-control",attrs:{type:"number",id:"count"},domProps:{value:t.count},on:{input:function(e){e.target.composing||(t.count=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"intro"}},[t._v("简介:")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.intro,expression:"intro"}],staticClass:"form-control",attrs:{type:"number",id:"intro"},domProps:{value:t.intro},on:{input:function(e){e.target.composing||(t.intro=e.target.value)}}})]),a("button",{staticClass:"btn btn-primary btn-mod",attrs:{type:"button"},on:{click:t.mod}},[t._v("提交修改")])]),t.loading?t._e():a("div",{staticClass:"update-form"},[a("div",{staticClass:"user-list-text"},[t._v("借阅本书的用户")]),t._l(t.users,(function(e){return a("div",{key:e.id,staticClass:"user-text"},[t._v(t._s(e))])}))],2),t.loading?a("Loading"):t._e()],1)},me=[],he={name:"BookDetail",components:{Loading:N},data:function(){return{loading:!0,errorMsg:"",bid:this.$route.params.bid,time:"",name:"",author:"",hot:"",count:"",intro:"",users:["te","sc"]}},methods:{mod:function(){var t=this;this.errorMsg="",""!==this.name?""===this.count||this.count<=0?this.errorMsg="库存需大于0":""!==this.intro?(""===this.author&&(this.author="佚名"),""===this.hot&&(this.hot="0"),fetch("/api/book/update",{credentials:"include",body:"name="+this.name+"&author="+this.author+"&hot="+this.hot+"&count="+this.count+"&intro="+this.intro+"&id="+this.bid,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){return t.json()})).then((function(e){0===e.code?t.errorMsg=e.msg:(alert("修改成功"),t.$router.push({path:"/admin/book"}))}))):this.errorMsg="简介不能为空":this.errorMsg="书名不能为空"}},created:function(){var t=this;fetch("/api/admin/cur",{credentials:"include"}).then((function(t){return t.json()})).then((function(e){t.admin=e,null===e.name?t.$router.push({path:"/login"}):(t.loading=!0,fetch("/api/book/detail",{credentials:"include",body:"id="+t.bid,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){return t.json()})).then((function(e){t.name=e.name,t.time=e.time,t.author=e.author,t.count=e.count,t.hot=e.hot,t.intro=e.intro,t.users=e.users,t.loading=!1})))}))}},fe=he,ve=(a("a612"),Object(c["a"])(fe,pe,me,!1,null,"6ccd6c98",null)),ge=ve.exports,be=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"user-detail-text"},[t._v("用户详情")]),""!==t.errorMsg?a("div",{staticClass:"alert alert-danger"},[t._v(t._s(t.errorMsg))]):t._e(),t.loading?t._e():a("form",{staticClass:"update-form"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"uid"}},[t._v("User Id:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.uid,expression:"uid"}],staticClass:"form-control",attrs:{type:"text",id:"uid",disabled:"disabled"},domProps:{value:t.uid},on:{input:function(e){e.target.composing||(t.uid=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"time"}},[t._v("注册时间:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.time,expression:"time"}],staticClass:"form-control",attrs:{type:"text",id:"time",disabled:"disabled"},domProps:{value:t.time},on:{input:function(e){e.target.composing||(t.time=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"name"}},[t._v("用户名:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",id:"name",disabled:"disabled"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"pwd"}},[t._v("密码:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.pwd,expression:"pwd"}],staticClass:"form-control",attrs:{type:"text",id:"pwd"},domProps:{value:t.pwd},on:{input:function(e){e.target.composing||(t.pwd=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"hold"}},[t._v("最大借阅数:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.hold,expression:"hold"}],staticClass:"form-control",attrs:{type:"number",id:"hold"},domProps:{value:t.hold},on:{input:function(e){e.target.composing||(t.hold=e.target.value)}}})]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.del}},[t._v("删除用户")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.mod}},[t._v("提交修改")])]),t.loading?t._e():a("div",{staticClass:"update-form"},[a("div",{staticClass:"book-list-text"},[t._v("该用户借阅的书籍")]),t._l(t.books,(function(e){return a("div",{key:e.id,staticClass:"book-text"},[t._v(t._s(e))])}))],2),t.loading?a("Loading"):t._e()],1)},_e=[],Ce={name:"UserDetail",components:{Loading:N},data:function(){return{loading:!0,errorMsg:"",uid:this.$route.params.uid,time:"",name:"",pwd:"",hold:"",books:["te","sc"]}},methods:{mod:function(){var t=this;this.errorMsg="",""===this.hold||this.count<=1?this.errorMsg="最大持有数应大于1":fetch("/api/user/update",{credentials:"include",body:"hold="+this.hold+"&pwd="+this.pwd+"&id="+this.uid,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){return t.json()})).then((function(e){0===e.code?t.errorMsg=e.msg:(alert("修改成功"),t.$router.push({path:"/admin/user"}))}))},del:function(){var t=this;this.errorMsg="",fetch("/api/user/delete",{credentials:"include",body:"id="+this.uid,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){return t.json()})).then((function(e){0===e.code?t.errorMsg=e.msg:(alert("删除成功"),t.$router.push({path:"/admin/user"}))}))}},created:function(){var t=this;fetch("/api/admin/cur",{credentials:"include"}).then((function(t){return t.json()})).then((function(e){t.admin=e,null===e.name?t.$router.push({path:"/login"}):(t.loading=!0,fetch("/api/user/detail",{credentials:"include",body:"id="+t.uid,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){return t.json()})).then((function(e){t.name=e.name,t.time=e.time,t.hold=e.hold,t.books=e.books,t.loading=!1})))}))}},ke=Ce,ye=(a("c27a"),Object(c["a"])(ke,be,_e,!1,null,"b5b21898",null)),we=ye.exports;o["a"].use(d["a"]);var xe=[{path:"/",component:Z},{path:"/login",component:dt},{path:"/reg",component:gt},{path:"/admin/book",component:Lt},{path:"/admin/book/add",component:de},{path:"/admin/book/detail/:bid",component:ge},{path:"/admin/user",component:St},{path:"/admin/user/detail/:uid",component:we},{path:"/admin/br_log",component:Gt},{path:"/admin/op_log",component:re},{path:"/admin",redirect:"/admin/book"},{path:"*",component:Zt}],Pe=new d["a"]({routes:xe,mode:"history"});a("ab8b"),a("3e48");o["a"].config.productionTip=!1,new o["a"]({router:Pe,render:function(t){return t(u)}}).$mount("#app")},"67df":function(t,e,a){"use strict";var o=a("013f"),n=a.n(o);n.a},"6eb0":function(t,e,a){"use strict";var o=a("295b"),n=a.n(o);n.a},"70dd":function(t,e,a){"use strict";var o=a("b613"),n=a.n(o);n.a},"71bf":function(t,e,a){},"71c9":function(t,e,a){"use strict";var o=a("2a7d"),n=a.n(o);n.a},"775a":function(t,e,a){},"793b":function(t,e,a){},"85ec":function(t,e,a){},a564:function(t,e,a){},a612:function(t,e,a){"use strict";var o=a("a564"),n=a.n(o);n.a},a7fe:function(t,e,a){},acfd:function(t,e,a){"use strict";var o=a("a7fe"),n=a.n(o);n.a},b613:function(t,e,a){},bdd0:function(t,e,a){},c17a:function(t,e,a){"use strict";var o=a("3936"),n=a.n(o);n.a},c27a:function(t,e,a){"use strict";var o=a("45f6"),n=a.n(o);n.a},cc77:function(t,e,a){"use strict";var o=a("41cd"),n=a.n(o);n.a},cfc9:function(t,e,a){"use strict";var o=a("bdd0"),n=a.n(o);n.a},d2d3:function(t,e,a){"use strict";var o=a("f624"),n=a.n(o);n.a},d3c5:function(t,e,a){},d63a:function(t,e,a){"use strict";var o=a("71bf"),n=a.n(o);n.a},d9fd:function(t,e,a){},dae6:function(t,e,a){"use strict";var o=a("0425"),n=a.n(o);n.a},db6e:function(t,e,a){"use strict";var o=a("0690"),n=a.n(o);n.a},e079:function(t,e,a){"use strict";var o=a("793b"),n=a.n(o);n.a},f624:function(t,e,a){},fa59:function(t,e,a){}});
//# sourceMappingURL=app.52d289ed.js.map